# -*- coding: utf-8 -*-

# 定制ImagesPipeline
from scrapy.pipelines.images import ImagesPipeline


class MyImagesPipeline(ImagesPipeline):
    # 重载ImagePipeline中的item_completed方法，获取下载地址
    def item_completed(self, results, item, info):

        for ok,value in results:                #通过断点可以看到图片路径存在results内

            image_file_path = value['path']     #将路径保存在item中返回

            item['i_imagespath'] = image_file_path
        return item